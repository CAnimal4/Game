<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>KingCrowdShot</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <div id="stage">
      <div id="fx"></div>

      <div id="hud">
        <div class="hudRow">
          <div class="pill">Crowd: <b id="hudCrowd">10</b></div>
          <div class="pill">Gold: <b id="hudGold">0</b></div>
          <div class="pill">Soldiers: <b id="hudSoldiers">0</b></div>
        </div>
        <div class="hudRow">
          <div class="pill">Dist: <b id="hudDist">0m</b></div>
          <div class="pill">Best: <b id="hudBest">0m</b></div>
        </div>

        <div class="hudButtons">
          <button id="btnPause" class="btn">Pause</button>
          <button id="btnRestart" class="btn">Restart</button>
          <button id="btnKingdom" class="btn">Kingdom</button>
          <button id="btnDefense" class="btn">Defense</button>
        </div>
      </div>

      <div id="player">
        <div class="avatar"></div>
        <div id="playerNum">10</div>
      </div>

      <!-- Start Overlay -->
      <div id="overlayStart" class="overlay">
        <div class="panel">
          <h1>KingCrowdShot</h1>
          <p class="sub">Swipe left/right to pick gates. Build your kingdom between runs.</p>
          <div class="row">
            <button id="btnPlay" class="btn primary">Play</button>
            <button id="btnPractice" class="btn">Practice</button>
          </div>
          <button id="btnOpenDefenseFromStart" class="btn ghost">Go to Defense</button>
          <p class="tiny">Tip: Tap anywhere to start if buttons are being stubborn.</p>
        </div>
      </div>

      <!-- Kingdom Overlay -->
      <div id="overlayKingdom" class="overlay hidden">
        <div class="panel wide">
          <div class="panelTop">
            <h2>Kingdom</h2>
            <button id="btnCloseKingdom" class="btn small">Close</button>
          </div>

          <div class="statsGrid">
            <div class="stat">Gold: <b id="kGold">0</b></div>
            <div class="stat">Soldiers: <b id="kSoldiers">0</b></div>
            <div class="stat">Start Crowd: <b id="kStartCrowd">10</b></div>
            <div class="stat">Luck: <b id="kLuck">0%</b></div>
          </div>

          <div id="upgradeGrid" class="grid"></div>

          <div class="panelBottom">
            <button id="btnResetProgress" class="btn danger">Reset Progress</button>
          </div>
        </div>
      </div>

      <!-- Defense Overlay -->
      <div id="overlayDefense" class="overlay hidden">
        <div class="panel wide">
          <div class="panelTop">
            <h2>Defense</h2>
            <button id="btnCloseDefense" class="btn small">Close</button>
          </div>

          <div class="statsGrid">
            <div class="stat">Gold: <b id="dGold">0</b></div>
            <div class="stat">Soldiers: <b id="dSoldiers">0</b></div>
            <div class="stat">Wave: <b id="dWave">1</b></div>
            <div class="stat">Enemy: <b id="dEnemy">0</b></div>
            <div class="stat">Power: <b id="dPower">0</b></div>
          </div>

          <div class="row">
            <button id="btnBuyTowerSlot" class="btn">Buy Tower Slot</button>
            <button id="btnFightWave" class="btn primary">Fight Wave</button>
          </div>

          <div id="towerGrid" class="grid"></div>
          <div id="defReport" class="sub"></div>
        </div>
      </div>

      <!-- Game Over Overlay -->
      <div id="overlayGameOver" class="overlay hidden">
        <div class="panel">
          <h2>Run Over</h2>
          <div id="summary" class="sub"></div>
          <div id="deathTip" class="tiny"></div>
          <div class="row">
            <button id="btnRunAgain" class="btn primary">Run Again</button>
          </div>
          <div class="row">
            <button id="btnGoKingdom" class="btn">Kingdom</button>
            <button id="btnGoDefense" class="btn">Defense</button>
          </div>
        </div>
      </div>

      <div id="toast"></div>
    </div>
  </div>

  <script src="game.js"></script>
</body>
</html>
