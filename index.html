<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Kingdom Crowdshot</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">KC</div>
        <div class="titlewrap">
          <div class="title">Kingdom Crowdshot</div>
          <div class="subtitle">Swipe lanes. Choose gates. Defend your kingdom between runs.</div>
        </div>
      </div>

      <div class="hud">
        <div class="pill">
          <div class="lbl">Crowd</div>
          <div class="val" id="hudCrowd">10</div>
        </div>
        <div class="pill">
          <div class="lbl">Gold</div>
          <div class="val" id="hudGold">0</div>
        </div>
        <div class="pill">
          <div class="lbl">Soldiers</div>
          <div class="val" id="hudSoldiers">0</div>
        </div>
        <div class="pill">
          <div class="lbl">Distance</div>
          <div class="val" id="hudDist">0m</div>
        </div>
        <div class="pill">
          <div class="lbl">Best</div>
          <div class="val" id="hudBest">0m</div>
        </div>
      </div>
    </header>

    <main class="stagewrap">
      <div class="stage" id="stage" aria-label="Game stage">
        <div class="lane laneL"></div>
        <div class="lane laneR"></div>
        <div class="divider"></div>

        <div class="player" id="player" aria-label="Player">
          <div class="chip">
            <div class="king">üëë</div>
            <div class="num" id="playerNum">10</div>
          </div>
          <div class="shadow"></div>
        </div>

        <div class="fx" id="fx"></div>

        <div class="toast" id="toast" role="status" aria-live="polite"></div>

        <div class="bottomBar">
          <button class="btn small" id="btnPause">Pause</button>
          <button class="btn small" id="btnKingdom">Kingdom</button>
          <button class="btn small" id="btnDefense">Defense</button>
          <button class="btn small danger" id="btnRestart">Restart</button>
        </div>

        <!-- Start / Pause overlay -->
        <div class="overlay" id="overlayStart">
          <div class="panel">
            <div class="panelTitle">Kingdom Crowdshot</div>
            <div class="panelBody">
              <div class="how">
                <div><span class="kbd">Swipe</span> or <span class="kbd">‚Üê / ‚Üí</span> to switch lanes.</div>
                <div>Pick gates: <span class="tag plus">+N</span>, <span class="tag mult">√óN</span>, avoid <span class="tag risk">‚àíN</span>.</div>
                <div>Late-game clashes scale to your power‚Äîexpect <span class="tag warn">huge</span> armies.</div>
                <div>Earn <span class="tag gold">Gold</span> + <span class="tag soldiers">Soldiers</span>, then defend via towers in <span class="tag defense">Defense</span>.</div>
              </div>

              <div class="ctaRow">
                <button class="btn primary" id="btnPlay">Play</button>
                <button class="btn" id="btnPractice">Practice (slower)</button>
                <button class="btn" id="btnOpenDefenseFromStart">Defense</button>
              </div>

              <div class="miniNote">
                Tip: When you‚Äôre already massive, multipliers are rocket fuel. Towers convert soldiers into reliable defense power.
              </div>
            </div>
          </div>
        </div>

        <!-- Kingdom overlay -->
        <div class="overlay hidden" id="overlayKingdom">
          <div class="panel wide">
            <div class="panelTitle">
              Kingdom Upgrades
              <span class="subTitle" id="kingdomSub">Spend gold on passive run perks.</span>
            </div>
            <div class="panelBody">
              <div class="kingStats">
                <div class="statCard">
                  <div class="sLbl">Bank (Gold)</div>
                  <div class="sVal" id="kGold">0</div>
                </div>
                <div class="statCard">
                  <div class="sLbl">Bank (Soldiers)</div>
                  <div class="sVal" id="kSoldiers">0</div>
                </div>
                <div class="statCard">
                  <div class="sLbl">Start Crowd</div>
                  <div class="sVal" id="kStartCrowd">10</div>
                </div>
                <div class="statCard">
                  <div class="sLbl">Gate Luck</div>
                  <div class="sVal" id="kLuck">0%</div>
                </div>
              </div>

              <div class="upgrades" id="upgradeGrid"></div>

              <div class="ctaRow">
                <button class="btn primary" id="btnCloseKingdom">Back</button>
                <button class="btn" id="btnResetProgress">Reset Progress</button>
              </div>

              <div class="miniNote">
                Kingshot-ish: Upgrades are your permanent ‚Äúkingdom tech.‚Äù Defense towers are a separate layer in Defense.
              </div>
            </div>
          </div>
        </div>

        <!-- Defense overlay -->
        <div class="overlay hidden" id="overlayDefense">
          <div class="panel wide">
            <div class="panelTitle">
              Kingdom Defense
              <span class="subTitle" id="defSub">Buy/upgrade towers, assign soldiers, fight waves.</span>
            </div>
            <div class="panelBody">
              <div class="defTop">
                <div class="statCard">
                  <div class="sLbl">Bank (Gold)</div>
                  <div class="sVal" id="dGold">0</div>
                </div>
                <div class="statCard">
                  <div class="sLbl">Bank (Soldiers)</div>
                  <div class="sVal" id="dSoldiers">0</div>
                </div>
                <div class="statCard">
                  <div class="sLbl">Wave</div>
                  <div class="sVal" id="dWave">1</div>
                </div>
                <div class="statCard">
                  <div class="sLbl">Next Enemy Army</div>
                  <div class="sVal" id="dEnemy">0</div>
                </div>
              </div>

              <div class="defGrid" id="towerGrid"></div>

              <div class="defBottom">
                <div class="defCard">
                  <div class="defLabel">Your Defense Power</div>
                  <div class="defValue" id="dPower">0</div>
                  <div class="defHint">Power = (assigned soldiers) √ó tower multipliers √ó kingdom bonuses</div>
                </div>

                <div class="defActions">
                  <button class="btn primary" id="btnFightWave">Fight Wave</button>
                  <button class="btn" id="btnBuyTowerSlot">Buy Tower Slot</button>
                  <button class="btn" id="btnCloseDefense">Back</button>
                </div>

                <div class="defReport" id="defReport">Assign soldiers to towers, then fight.</div>
              </div>

              <div class="miniNote">
                Strategy: Fewer towers with higher level can outperform many low towers. Don‚Äôt ignore soldiers bank‚Äîthis is your ‚Äúarmy placement‚Äù layer.
              </div>
            </div>
          </div>
        </div>

        <!-- Game over overlay -->
        <div class="overlay hidden" id="overlayGameOver">
          <div class="panel">
            <div class="panelTitle">Run Over</div>
            <div class="panelBody">
              <div class="summary" id="summary"></div>
              <div class="ctaRow">
                <button class="btn primary" id="btnRunAgain">Run Again</button>
                <button class="btn" id="btnGoKingdom">Kingdom</button>
                <button class="btn" id="btnGoDefense">Defense</button>
              </div>
              <div class="miniNote" id="deathTip">Tip appears here.</div>
            </div>
          </div>
        </div>

      </div>
    </main>

    <footer class="foot">
      <div>No ads. Offline. Your only enemy is math and hubris.</div>
      <div class="muted">Controls: Swipe / Arrow keys / A-D</div>
    </footer>
  </div>

  <script src="game.js"></script>
</body>
</html>
